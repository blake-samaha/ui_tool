{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://schemas.cognite.ai/requirements/01_Conceptual_Model.schema.json",
    "title": "01 Conceptual Model",
    "type": "object",
    "additionalProperties": false,
    "required": [
        "schemaVersion",
        "moduleId",
        "objects",
        "relationships",
        "dataModel"
    ],
    "properties": {
        "schemaVersion": { "type": "integer", "minimum": 1 },
        "moduleId": {
            "type": "string",
            "pattern": "^[a-z0-9]+(?:_[a-z0-9]+)*$"
        },
        "objects": {
            "type": "array",
            "minItems": 1,
            "items": { "$ref": "#/$defs/object" }
        },
        "relationships": {
            "type": "array",
            "items": { "$ref": "#/$defs/relationship" }
        },
        "externalReferences": {
            "type": "array",
            "items": { "$ref": "#/$defs/externalReference" }
        },
        "dataModel": { "$ref": "#/$defs/dataModel" },
        "performanceHints": { "$ref": "#/$defs/performanceHints" }
    },
    "$defs": {
        "object": {
            "type": "object",
            "additionalProperties": false,
            "required": ["name", "objectId", "space"],
            "properties": {
                "name": { "type": "string" },
                "objectId": {
                    "type": "string",
                    "pattern": "^[a-z][A-Za-z0-9]*$",
                    "description": "CamelCase or camelCase identifier"
                },
                "implementsCore": {
                    "oneOf": [
                        { "type": "string" },
                        { "type": "array", "items": { "type": "string" }, "minItems": 1 }
                    ],
                    "description": "Core or industry CDM views implemented by this object (space=cdf_cdm and extensions)."
                },
                "viewExternalId": {
                    "type": "string",
                    "pattern": "^[a-z0-9:_-]+$"
                },
                "containerExternalId": {
                    "type": "string",
                    "pattern": "^[a-z0-9:_-]+$"
                },
                "space": {
                    "type": "string",
                    "pattern": "^[a-z0-9_-:.]+$"
                },
                "viewFilter": { "type": "string" },
                "hasData": { "type": "boolean" }
            }
        },
        "relationship": {
            "type": "object",
            "additionalProperties": false,
            "required": ["from", "to", "relationshipId", "type", "multiplicity"],
            "properties": {
                "from": { "type": "string" },
                "to": { "type": "string" },
                "relationshipId": { "type": "string" },
                "description": { "type": "string" },
                "type": { "type": "string", "enum": ["direct", "edge"] },
                "multiplicity": { "type": "string", "enum": ["1:1", "1:N", "N:M"] },
                "label": { "type": "string" },
                "sourceResolution": { "type": "string" },
                "edgeSpace": { "type": "string" },
                "edgeTypeExternalId": { "type": "string" }
            }
        },
        "externalReference": {
            "type": "object",
            "additionalProperties": false,
            "required": ["externalModel", "space"],
            "properties": {
                "externalModel": { "type": "string" },
                "space": { "type": "string" },
                "implements": {
                    "oneOf": [
                        { "type": "string" },
                        { "type": "array", "items": { "type": "string" }, "minItems": 1 }
                    ]
                }
            }
        },
        "dataModel": {
            "type": "object",
            "additionalProperties": false,
            "required": ["externalId", "version", "groupedViews"],
            "properties": {
                "externalId": { "type": "string" },
                "version": { "type": "string" },
                "groupedViews": {
                    "type": "array",
                    "minItems": 1,
                    "items": { "type": "string" }
                }
            }
        },
        "performanceHints": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "indexes": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "onObject": { "type": "string" },
                            "fields": {
                                "type": "array",
                                "items": { "type": "string" }
                            }
                        }
                    }
                },
                "uniqueness": { "type": "string" }
            }
        }
    }
}

